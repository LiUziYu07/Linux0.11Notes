#  Linux0.11源代码阅读

## 微型计算机组成原理

CPU通过三条总线(地址总线、数据总线、控制总线)与系统中其他部分进行通信

### 现代计算机的总线结构

总线结构为了提高传输速率,与8086相比产生了很大的变化,使用两个超大规模芯片构成的芯片组和芯片集构成(南桥芯片与北桥芯片),但依旧与传统的PC机硬件上兼容.

![总线结构](%E6%80%BB%E7%BA%BF%E7%BB%93%E6%9E%84.jpg)

#### I/O端口和访问控制方式

CPU需要地址才可以访问控制器或者控制卡上的数据和状态信息,就类似于查户口的工作人员需要知道你家的门牌号才能找到你家查户口.

##### 两种编址方法:统一编址和独立编址:

+ 统一编址:将I/O端口当作内存来寻址,CPU访问一个端口的操作与访问内存的操作一样

+ 独立编址:将I/O端口控制器和控制卡的寻址空间看作一个独立的空间来寻址.称为I/O地址空间,每个端口对应一个I/O地址,有专门的I/O指令访问端口

##### Linux采用的编址方式:

+ IBM PC机及其兼容机采用主要独立编址方式,使用ISA(工业标准体系结构)总线结构的传统PC及其I/O地址空间0x000–0x3FF有1024个端口可用

+ 但IBM  PC机也部分使用统一编址方式,例如CGA显示卡上显示内存的地址就直接占用了存储地址空间0xB800–0xBC00范围

+ Linux下可通过查看/proc/ioports文件可以得到相关控制器或设置使用的I/O地址范围:

  ![I:O端口](I:O%E7%AB%AF%E5%8F%A3.JPG)

+ 对于使用EISA或PCI等总线结构的现代PC机,有64KB的I/O地址空间可以使用

### 接口访问控制

#### 接口数据的传输方式:一般采用循环查询方式、中断处理方式和DMA传输方式

+ 循环查询方式,无需过多硬件支持,但耗费CPU时间较多,Linux中很少使用(仅当设备或控制器能立刻返回信息时)

+ 中断处理需要中断控制器的支持,Linux中绝大多数设备I/O控制都采用中断处理

+ DMA传输方式:需要DMA控制器,无需CPU,效率较高,Linux中软盘驱动程序使用中断和DMA方式配合来实现数据的传输

### 存储器

+ 主存

  现代CPU的物理内存寻址范围高达4GB,为了与原来的PC机在软件上兼容,系统1MB以下物理内存使用分配上仍然保持与原来PC机基本一致,而BIOS原来所在的位置,仍然用于复制BIOS代码.

###### 启动计算机

计算机家电初始化后,有4GB的物理地址空间,除了地址0xA0000到0xFFFFF和0xFFFE00到0xFFFFFFFF范围以外的内存均可用作系统内存.这两个区域被用于I/O设备和BIOS程序

在linux0.11中假设有16MB物理内存

### BIOS

